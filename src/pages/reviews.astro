---
import Layout from "../layouts/Layout.astro";
import Footer from "../components/Footer.astro";

interface Review {
  id: number;
  stars: number;
  text: string;
}

const reviews: Review[] = [
  {
    id: 1,
    stars: 5,
    text: "Increíble sabor y textura. Se nota que son chocolates artesanales hechos con dedicación. ¡Mis favoritos sin duda!",
  },
  {
    id: 2,
    stars: 4.5,
    text: "El empaque es hermoso y elegante, ideal para regalar. El sabor intenso del chocolate oscuro me encantó.",
  },
  {
    id: 3,
    stars: 4,
    text: "Muy ricos y con buena presentación. Quizás un poco dulces para mi gusto, pero la calidad es excelente.",
  },
  {
    id: 4,
    stars: 5,
    text: "Perfectos para compartir en familia. Llegaron en excelente estado y con un aroma delicioso. ¡Recomendados al 100%!",
  },
  {
    id: 5,
    stars: 4.5,
    text: "Probé la edición de Halloween y fue un éxito en mi casa. Se ven geniales y el sabor es espectacular. Esperando la próxima temporada.",
  },
  {
    id: 6,
    stars: 4,
    text: "Excelente relación calidad-precio. Se nota el cuidado en los detalles. Volveré a pedir sin pensarlo.",
  },
  {
    id: 7,
    stars: 5,
    text: "Los ChocoBum blancos son una locura. Suaves, dulces y con el balance perfecto. ¡Mi nuevo postre favorito!",
  },
  {
    id: 8,
    stars: 4.5,
    text: "Entrega rápida y presentación impecable. Ideal para regalar o darse un gusto. Se ganaron un cliente fiel.",
  },
];
---

<Layout title="DeliBums | Testimonios">
  <main class="bg-cream min-h-screen">
    <section class="w-full pt-32 pb-12 px-6">
      <div class="container mx-auto text-center">
        <h1 class="text-5xl md:text-6xl font-playfair text-chocolate mb-6 reveal-item">
          Voces de Nuestros Clientes
        </h1>
        <p class="text-terracotta font-sans text-sm tracking-widest uppercase reveal-item">
          Experiencias Reales
        </p>
      </div>
    </section>

    <section class="w-full pb-20 px-6">
      <div
        class="container mx-auto columns-1 md:columns-2 lg:columns-3 gap-8 space-y-8"
      >
        {
          reviews.map((review) => (
            <div class="bg-white p-8 break-inside-avoid border border-chocolate/5 hover:border-chocolate/20 transition-colors duration-500 reveal-card">
              <div class="flex items-center gap-2 mb-6">
                <div class="flex gap-1 text-terracotta">
                  {Array.from({ length: 5 }).map((_, index) => (
                    <i
                      class={`fa ${
                        index < Math.floor(review.stars)
                          ? "fa-star"
                          : index === Math.floor(review.stars) &&
                               review.stars % 1 !== 0
                             ? "fa-star-half-alt"
                             : "fa-star-o text-gray-200"
                      } text-xs`}
                    />
                  ))}
                </div>
                <!-- Optional: Date or Verified Badge -->
              </div>
              <p class="text-chocolate/80 font-sans font-light leading-relaxed italic">"{review.text}"</p>
              <div class="mt-6 pt-4 border-t border-chocolate/5 flex justify-between items-center">
                  <span class="text-xs font-sans uppercase tracking-widest text-chocolate/40">Cliente Verificado</span>
                  <span class="text-xs font-playfair font-bold text-chocolate">{review.stars.toFixed(1)}</span>
              </div>
            </div>
          ))
        }
      </div>
    </section>
  </main>
</Layout>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    // Reveal Header
    gsap.from(".reveal-item", {
        y: 30,
        opacity: 0,
        duration: 1,
        stagger: 0.2,
        ease: "power3.out"
    });

    // Reveal Cards
    gsap.from(".reveal-card", {
        y: 50,
        opacity: 0,
        duration: 0.8,
        stagger: 0.1,
        ease: "power2.out",
        scrollTrigger: {
            trigger: ".reveal-card",
            start: "top 90%"
        }
    });
  });
</script>
